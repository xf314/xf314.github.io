await __OSL.all(["xbp/es/button","xbp/es/button/style","xbp/es/form","xbp/es/form/style","xbp/es/input","xbp/es/input/style","vue","xbp/es/message","xbp/es/message/style","xbp/es/modal","xbp/es/modal/style"]);import{u as x}from"./index-90fc36e4.js";const{resolveComponent:u,createVNode:n,withCtx:_,createTextVNode:d,createElementVNode:b,openBlock:v,createBlock:y}=__OSL.get("vue"),S={class:"btn"},{reactive:w}=__OSL.get("vue"),{Form:L}=__OSL.get("xbp/es/form"),{FormItem:V}=__OSL.get("xbp/es/form"),{Input:O}=__OSL.get("xbp/es/input"),{InputPassword:B}=__OSL.get("xbp/es/input"),{Button:$}=__OSL.get("xbp/es/button"),k={components:{XForm:L,XFormItem:V,XInput:O,XInputPassword:B,XButton:$}},C=Object.assign(k,{__name:"LoginForm",props:{loading:Boolean},emits:["close","submit"],setup(p,{emit:m}){const l={account:[{required:!0,message:"账户名必填"},{minLength:2,message:"至少需要两个字"}],password:[{required:!0,message:"密码必填",trigger:["change","input"]},{minLength:5,message:"至少需要5字符",trigger:["change","input"]}]},t=w({account:"admin",password:"666666"}),i=({values:o,errors:e})=>{console.log("values:",o,`
errors:`,e),!e&&m("submit",o)};return(o,e)=>{const s=u("x-input"),a=u("x-form-item"),g=u("x-input-password"),c=u("x-button"),f=u("x-form");return v(),y(f,{class:"login-form",rules:l,model:t,"label-width":0,ref:"formRef",onSubmit:i},{default:_(()=>[n(a,{field:"account"},{default:_(()=>[n(s,{modelValue:t.account,"onUpdate:modelValue":e[0]||(e[0]=r=>t.account=r),"allow-clear":"",placeholder:"请输入账户名"},null,8,["modelValue"])]),_:1}),n(a,{field:"password"},{default:_(()=>[n(g,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=r=>t.password=r),"allow-clear":"",placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),b("div",S,[n(c,{type:"primary","html-type":"submit"},{default:_(()=>[d("登录")]),_:1}),n(c,{onClick:e[2]||(e[2]=r=>o.$refs.formRef.resetFields())},{default:_(()=>[d("清除")]),_:1})])]),_:1},8,["model"])}}});const{useModel:N}=__OSL.get("vue"),{createVNode:h,resolveComponent:F,normalizeStyle:I,withCtx:X,openBlock:M,createBlock:U}=__OSL.get("vue"),{ref:j}=__OSL.get("vue"),{Message:q}=__OSL.get("xbp/es/message"),{Modal:z}=__OSL.get("xbp/es/modal"),E={components:{XModal:z}},R=Object.assign(E,{__name:"index",props:{modelValue:{}},emits:["update:modelValue"],setup(p){const{login:m}=x(),l=j(!1),t=N(p,"modelValue");async function i({account:o,password:e}){l.value=!0;try{let s=await m({account:o,password:e});if(console.log("x onSubmit login ",s),!s)return;q.success(`登录成功 - ${o}`),t.value=!1}finally{l.value=!1}}return(o,e)=>{const s=F("x-modal");return M(),U(s,{title:"登录","title-align":"left",visible:t.value,"onUpdate:visible":e[1]||(e[1]=a=>t.value=a),style:I(o.style),class:"app-login",closable:!1,footer:!1,"mask-closable":!1,width:"400px",draggable:""},{default:X(()=>[h(C,{onSubmit:i,onClose:e[0]||(e[0]=a=>t.value=!1),loading:l.value},null,8,["loading"])]),_:1},8,["visible","style"])}}});export{R as default};
